# conding=utf-8
from fontTools.ttLib import TTFont

from PIL import Image, ImageDraw, ImageFont  #绘制图片
import pytesseract   #文字识别库,这个包的安装还需要安装tesseract.exe，可以网上搜教程
import numpy

# font = TTFont('./woff/fd8152c2.woff')    # 打开文件
# font.saveXML('./xml_woff/font.xml')     # 转换成 xml 文件并保存

def fontConvert(fontPath):     #将web下载的字体文件解析，返回其编码和汉字的对应关系
    font = TTFont(fontPath)  # 打开文件
    codeList = font.getGlyphOrder()[2:]
    im = Image.new("RGB", (1800, 1000), (255, 255, 255))
    dr = ImageDraw.Draw(im)
    font = ImageFont.truetype(fontPath, 40)
    count = 15
    arrayList = numpy.array_split(codeList,count)   #将列表切分成15份，以便于在图片上分行显示
    for t in range(count):
        newList = [i.replace("uni", "\\u") for i in arrayList[t]]
        text = "".join(newList)
        text = text.encode('utf-8').decode('unicode_escape')
        dr.text((0, 50 * t), text, font=font, fill="#000000")
    # im.save("sss.jpg")
    # im = Image.open("sss.jpg")      #可以将图片保存到本地，以便于手动打开图片查看
    result = pytesseract.image_to_string(im, lang="chi_sim")
    result = result.replace(" ","").replace("\n","") #OCR识别出来的字符串有空格换行符
    codeList = [i.replace("uni","&#x")+";" for i in codeList]
    return dict(zip(codeList,list(result)))



print(fontConvert("./woff/fd8152c2.woff"))


{'&#xe0b0;': '1','&#xe546;': '2','&#xf329;': '3','&#xe114;': '4','&#xea50;': '5','&#xe7c4;': '6','&#xe340;': '7','&#xf287;': '8','&#xe239;': '9','&#xf1f6;': 'O','&#xe0c5;': '店','&#xf009;': '中','&#xf7aa;': '美','&#xe632;': '家','&#xe6af;': '馆','&#xe639;': '小','&#xe824;': '车','&#xe512;': '大','&#xef71;': '市','&#xe028;': '公','&#xeec2;': '酒','&#xefa6;': '行','&#xf44c;': '国','&#xe4e6;': '品','&#xf8a7;': '发','&#xe73d;': '电','&#xe562;': '金','&#xe6e3;': '心','&#xea33;': '业','&#xf0e5;': '商','&#xf3b3;': '司','&#xf611;': '超','&#xe6c5;': '生','&#xe273;': '装','&#xe66a;': '园','&#xefdf;': '场','&#xf812;': '食','&#xeb24;': '有','&#xf809;': '新','&#xe413;': '限','&#xe508;': '天','&#xf654;': '面','&#xe189;': '工','&#xf2cb;': '服','&#xf64f;': '海','&#xf0ec;': '华','&#xe387;': '水','&#xf784;': '房','&#xf472;': '饰','&#xea43;': '城','&#xef5f;': '乐','&#xe5f7;': '汽','&#xe843;': '香','&#xf018;': '部','&#xee49;': '利','&#xf42f;': '子','&#xf5f5;': '老','&#xeb9d;': '艺','&#xf35d;': '花','&#xef62;': '专','&#xe737;': '东','&#xeefe;': '肉','&#xe233;': '菜','&#xe8ee;': '学','&#xe833;': '福','&#xe202;': '饭','&#xf579;': '人','&#xeb54;': '百','&#xe917;': '餐','&#xec03;': '茶','&#xedca;': '务','&#xf3aa;': '通','&#xf7d9;': '昧','&#xf013;': '所','&#xe4ea;': '山','&#xed08;': '区','&#xe91e;': '门','&#xe9e1;': '药','&#xe8fa;': '银','&#xf883;': '农','&#xf675;': '龙','&#xe65e;': '停','&#xe852;': '尚','&#xf2b8;': '安','&#xeb96;': '广','&#xf78c;': '熹','&#xeaf3;': '_','&#xf22a;': '容','&#xe5da;': '动','&#xeb33;': '南','&#xec4c;': '真','&#xeaf4;': '源','&#xe8bb;': '兴','&#xf137;': '鲜','&#xecbf;': '记','&#xf698;': '时','&#xece5;': '机','&#xf52e;': '烤','&#xf62b;': '文','&#xe32c;': '康','&#xf0da;': '信','&#xf72e;': '果','&#xe1ca;': '阳','&#xe004;': '理','&#xeba3;': '锅','&#xedc0;': '宝','&#xe475;': '达','&#xef26;': '地','&#xea3b;': 'L','&#xeb3c;': '衣','&#xec11;': '特','&#xe57c;':'产','&#xe2de;': '西','&#xe973;': '批','&#xe0bd;': '坊','&#xe391;': '州','&#xe046;': '牛','&#xf02d;': '佳','&#xe7b8;': '化','&#xe1c9;': '五','&#xe567;': '米','&#xf390;': '修','&#xe4c2;': '爱','&#xf5f9;': '北','&#xec0b;': '养','&#xe8f0;': '卖','&#xee50;': '建','&#xf4f0;': '材','&#xe1ce;': '三','&#xe4a8;': '会','&#xecd0;': '鸡','&#xec8c;': '室','&#xf28b;': '红','&#xf86c;': '站','&#xeb47;': '德','&#xf245;': '王','&#xed1b;': '光','&#xe4c4;': '名','&#xe651;': '丽','&#xe0ff;': '油','&#xe60b;': '院','&#xf680;': '堂','&#xe65d;': '烧','&#xef8a;': '江','&#xf3c7;': '社','&#xe9ab;': '合','&#xf79f;': '星','&#xf1aa;': '货','&#xf672;': '型','&#xe231;': '村','&#xe7f5;': '自','&#xf00a;': '科','&#xf537;': '快','&#xf0ad;': '便','&#xea2e;': '日','&#xe87f;': '民','&#xe353;': '营','&#xeafd;': '和','&#xf5de;': '活','&#xf5d8;': '童','&#xe080;': '阴','&#xf402;': '器','&#xf1d5;': '烟','&#xe934;': '盲','&#xef3a;': '宾','&#xf0a7;': '精','&#xf6cd;': '屋','&#xf5db;': '经','&#xf203;': '居','&#xf2b5;': '庄','&#xe88d;': '石','&#xeb30;': '顺','&#xe6b5;': '林','&#xf7b8;': '尔','&#xecbc;': '县','&#xf285;': '手','&#xe0aa;': '厅','&#xe2f9;': '销','&#xf00c;': '用','&#xee68;': '好','&#xe45a;': '害','&#xe368;': '火','&#xe316;': '雅','&#xea27;': '盛','&#xe8d5;': '体','&#xeb83;': '旅','&#xee85;': '之','&#xef8f;': '鞋','&#xf681;': '辣','&#xe1fa;': '作','&#xe0d5;': '粉','&#xeafc;': '包','&#xf6df;': '楼','&#xeeb5;': '校','&#xee7d;': '鱼','&#xee81;': '平','&#xf3f6;': '彩','&#xf7a3;': '上','&#xe9c8;': '吧','&#xe96a;': '保','&#xf2be;': '永','&#xf75f;': '万','&#xf319;': '物','&#xf5a8;': '教','&#xf816;': '屹','&#xf1dc;': '设','&#xe426;': '医','&#xe109;': '正','&#xeae0;': '造','&#xec0a;': '丰','&#xf41a;': '健','&#xf0fa;': '点','&#xe229;': '汤','&#xe506;': '网','&#xf3fb;': '庆','&#xe808;': '技','&#xe3fd;': '斯','&#xf03b;': '洗','&#xe427;': '料','&#xf46b;': '配','&#xef20;': '汇','&#xf84d;': '木','&#xef0b;': '缘','&#xf4f4;': '加','&#xe238;': '麻','&#xf42a;': '联','&#xee98;': '到','&#xe576;': '‖','&#xeed0;': '泰','&#xe65c;': '色','&#xe908;': '世','&#xe79b;': '方','&#xef1b;': '寓','&#xe3cc;': '风','&#xf6b6;': '幼','&#xe847;': '羊','&#xe417;': '烫','&#xf826;': '来','&#xef9d;': '高','&#xef98;': '厂','&#xf6db;': '兰','&#xf2d1;': '阿','&#xf593;': '贝','&#xe65a;': '皮','&#xe7f1;': '全','&#xe00e;': '女','&#xe3f5;': '拉','&#xe781;': '成','&#xe5cb;': '云','&#xf618;': '维','&#xf0d3;': '贸','&#xf38f;': '道','&#xeec0;': '术','&#xe8aa;': '运','&#xede2;': '都','&#xf1a4;': '口','&#xf4ca;': '博','&#xeb1c;': '河','&#xefa9;': '瑞','&#xec04;': '宏','&#xe720;': '京','&#xf6a2;': '际','&#xe9c5;': '路','&#xeb64;': '祥','&#xe704;': '胃','&#xeea6;': '镇','&#xf232;': '厨','&#xe46a;': '培','&#xee8b;': '力','&#xee8c;': '惠','&#xf294;': '连','&#xe493;': '马','&#xf222;': '鸿','&#xf764;': '钢','&#xe815;': '训','&#xe319;': '影','&#xedb8;': '甲','&#xef6f;': '助','&#xe8e0;': '窗','&#xe07e;': '布','&#xe32a;': '富','&#xf3a5;': '牌','&#xf4d2;': '头','&#xf522;': '四','&#xf6cf;': '多','&#xedfe;': '妆','&#xe694;': '吉','&#xedd9;': '苑','&#xf603;': '沙','&#xe2a0;': '恒','&#xf083;': '隆','&#xf346;': '春','&#xe8d3;': '干','&#xe5f0;': '饼','&#xf30d;': '氏','&#xe9d7;': '里','&#xea6c;': '二','&#xe84e;': '管','&#xe8ae;': '诚','&#xe8c0;': '制','&#xec46;': '售','&#xe7ec;': '嘉','&#xec27;': '长','&#xf621;': '轩','&#xe72f;': '杂','&#xf449;': '副','&#xe695;': '清','&#xe228;': '计','&#xe885;': '黄','&#xe65f;': '讯','&#xf60d;': '太','&#xe67c;': '鸭','&#xe723;': '号','&#xe2bf;': '街','&#xe15b;': '交','&#xeaad;': '与','&#xe203;': '叉','&#xed72;': '附','&#xee04;': '近','&#xf45e;': '层','&#xe976;': '旁','&#xf276;': '对','&#xe4f9;': '巷','&#xf722;': '栋','&#xe2cc;': '环','&#xf0a1;': '省','&#xe906;': '桥','&#xea21;': '湖','&#xf33f;': '段','&#xea0f;': '乡','&#xe1ec;': '厦','&#xecf5;': '府','&#xf2ef;': '铺','&#xf07e;': '内','&#xf6b5;': '侧','&#xf74f;': '元','&#xed15;': '购','&#xf45d;': '前','&#xe58b;': '幢','&#xf0bb;': '滨','&#xf396;': '处','&#xf5cc;': '向','&#xef76;': '座','&#xf543;': '下','&#xefe6;': '禀','&#xf683;': '凤','&#xe403;': '港','&#xf226;': '开','&#xf5f1;': '关','&#xeccf;': '景','&#xe6ee;': '泉','&#xee26;': '塘','&#xe257;': '放','&#xee51;': '昌','&#xeb70;': '线','&#xe568;': '湾','&#xea59;': '政','&#xeda3;': '步','&#xea22;': '宁','&#xf542;': '解','&#xf293;': '白','&#xf882;': '田','&#xe854;': '町','&#xf580;': '溪','&#xe573;': '十','&#xe048;': '八','&#xe92d;': '古','&#xf8f7;': '双','&#xe178;': '胜','&#xe5fd;': '本','&#xebac;': '单','&#xf805;': '同','&#xecf4;': '九','&#xe6b9;': '迎','&#xf35c;': '第','&#xf132;': '台','&#xf1dd;': '玉','&#xf50e;': '锦','&#xebbe;': '底','&#xf27f;': '后','&#xf079;': '七','&#xf6b1;': '斜','&#xeea3;': '期','&#xf627;': '武','&#xe341;': '岭','&#xf71c;': '松','&#xe1c8;': '角','&#xe94a;': '纪','&#xf645;': '朝','&#xf51d;': '峄','&#xf617;': '六','&#xe77a;': '振','&#xe97d;': '珠','&#xf38e;': '局','&#xe481;': '岗','&#xead0;': '洲','&#xf118;': '横','&#xe544;': '边','&#xe2f0;': '济','&#xe56f;': '井','&#xe9f2;': '办','&#xe6f7;': '汉','&#xf705;': '代','&#xeec5;': '临','&#xf466;': '弄','&#xebb6;': '团','&#xecbb;': '外','&#xf582;': '塔','&#xf2b9;': '杨','&#xf830;': '铁','&#xf610;': '浦','&#xf6ef;': '字','&#xe3fe;': '年','&#xf271;': '岛','&#xed05;': '陵','&#xe9d6;': '原','&#xe754;': '梅','&#xf2bf;': '进','&#xe03d;': '荣','&#xe56e;': '友','&#xeefb;': '虹','&#xe2e3;': '央','&#xe8f3;': '桂','&#xefb9;': '沿','&#xe12d;': '事','&#xe1c0;': '津','&#xe0e2;': '凯','&#xe35f;': '莲','&#xe100;': '丁','&#xe253;': '秀','&#xf304;': '柳','&#xe937;': '集','&#xe7a4;': '紫','&#xe62f;': '旗','&#xea66;': '张','&#xe729;': '谷','&#xf3e8;': '的','&#xe6c8;': '是','&#xe685;': '不','&#xf341;': '了','&#xebdb;': '很','&#xf2af;': '还','&#xe36e;': '个','&#xe197;': '也','&#xe7b1;': '这','&#xe1e3;': '我','&#xe377;': '就','&#xeebc;': '在','&#xeed3;': '以','&#xed2f;': '可','&#xf3d7;': '到','&#xe40b;': '错','&#xf7d5;': '没','&#xec9a;': '去','&#xeabd;': '过','&#xe6ff;': '感','&#xef8c;': '次','&#xe55c;': '耍','&#xe630;': '比','&#xf40d;': '觉','&#xe9d2;': '看','&#xe37e;': '得','&#xe0e6;': '说','&#xf721;': '常','&#xf678;': '真','&#xe161;': '们','&#xeaba;': '但','&#xe3f4;': '最','&#xe459;': '善','&#xe85e;': '眙','&#xe051;': '么','&#xe891;': '别','&#xe0f0;': '位','&#xf7ef;': '能','&#xe1ed;': '较','&#xf481;': '境','&#xf12b;': '非','&#xe99b;': '为','&#xe3f7;': '欢','&#xe5a9;': '然','&#xefee;': '他','&#xe53a;': '挺','&#xe22d;': '着','&#xea4b;': '价','&#xe043;': '那','&#xe7a1;': '意','&#xe3c3;': '种','&#xeb72;': '想','&#xea05;': '出','&#xf24b;': '员','&#xeeb0;': '两','&#xf79e;': '推','&#xf557;': '做','&#xe69a;': '排','&#xe7a7;': '实','&#xf756;': '分','&#xe722;': '间','&#xe278;': '甜','&#xe804;': '度','&#xf38a;': '起','&#xf538;': '满','&#xe213;': '给','&#xe6e8;': '热','&#xee47;': '完','&#xe23a;': '格','&#xeaa2;': '荐','&#xee6e;': '蝎','&#xf49a;': '等','&#xe566;': '其','&#xf527;': '再','&#xe05a;': '几','&#xf68c;': '只','&#xeb22;': '现','&#xe315;': '朋','&#xf2c9;': '候','&#xe311;': '样','&#xe679;': '直','&#xf865;': '而','&#xf5c5;': '买','&#xf157;': '于','&#xf461;': '般','&#xe358;': '豆','&#xf3ba;': '量','&#xe0fe;': '选','&#xf614;': '奶','&#xf6ce;': '打','&#xeb9c;': '每','&#xe7e6;': '评','&#xee6d;': '少','&#xf015;': '算','&#xe3e7;': '又','&#xe2ad;': '因','&#xf0dd;': '情','&#xe6ab;': '找','&#xf21e;': '些','&#xf514;': '份','&#xe799;': '置','&#xe016;': '适','&#xe44c;': '什','&#xf158;': '蛋','&#xf623;': '师','&#xf475;': '气','&#xee4f;': '你','&#xf673;': '姐','&#xea7f;': '棒','&#xe325;': '试','&#xe298;': '总','&#xedf5;': '定','&#xe828;': '峒','&#xe1d6;': '足','&#xf6c3;': '级','&#xf1eb;': '整','&#xe743;': '带','&#xe510;': '虾','&#xf5fc;': '如','&#xedc3;': '态','&#xf658;': '且','&#xf58a;': '尝','&#xf3d5;': '主','&#xe28b;': '话','&#xe47c;': '强','&#xe496;': '当','&#xf100;': '更','&#xf47e;': '板','&#xf7fd;': '知','&#xe542;': '己','&#xf56e;': '无','&#xeea9;': '酸','&#xf8b0;': '让','&#xe1a2;': '入','&#xf41c;': '啦','&#xea9e;': '式','&#xf814;': '笑','&#xe4ad;': '赞','&#xe5b9;': '片','&#xf124;': '酱','&#xf787;': '差','&#xf2e0;': '像','&#xe6dc;': '提','&#xe13b;': '队','&#xef7e;': '走','&#xe94e;': '嫩','&#xf280;': '才','&#xe175;': '刚','&#xf1e3;': '午','&#xece0;': '接','&#xe49e;': '重','&#xe63e;': '串','&#xed54;': '回','&#xea85;': '晚','&#xe923;': '微','&#xe71c;': '周','&#xe018;': '值','&#xf7c1;': '费','&#xe66e;': '性','&#xe831;': '桌','&#xe7cf;': '拍','&#xf3ee;': '跟','&#xebb0;': '块','&#xe6c7;': '调','&#xef3b;': '糕'}
